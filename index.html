<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Tanishka ‚ù§Ô∏è</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --primary: #ff4d6d;
            --secondary: #ff8fa3;
            --glass: rgba(255, 255, 255, 0.2);
            --text: #4a4a4a;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Montserrat', sans-serif;
            background: radial-gradient(circle at top right, #fff1f2, #ffd1dc);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        /* Ambient Background */
        #bg-canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1;
        }

        /* Glass Card */
        .glass-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            border-radius: 30px;
            padding: 40px;
            text-align: center;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            animation: fadeIn 1.5s ease-out;
            z-index: 10;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            font-family: 'Dancing Script', cursive;
            color: var(--primary);
            font-size: 3rem;
            margin-bottom: 10px;
        }

        p { color: var(--text); line-height: 1.6; margin-bottom: 20px; }

        /* Heart Frame */
        .heart-container {
            width: 180px;
            height: 180px;
            margin: 0 auto 20px;
            position: relative;
            display: none;
            filter: drop-shadow(0 10px 15px rgba(255, 77, 109, 0.4));
        }

        .heart-mask {
            width: 100%;
            height: 100%;
            background-color: var(--primary);
            clip-path: path('M90 30c-25-45-100-30-100 45 0 50 60 90 100 130 40-40 100-80 100-130 0-75-75-90-100-45z');
            overflow: hidden;
            border: 5px solid white;
        }

        .heart-mask img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Buttons */
        .btn-group {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            min-height: 120px;
            align-items: center;
        }

        button {
            padding: 14px 30px;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-size: 1rem;
        }

        #yesBtn {
            background: var(--primary);
            color: white;
            box-shadow: 0 8px 20px rgba(255, 77, 109, 0.3);
        }

        #noBtn {
            background: white;
            color: #888;
            border: 1px solid #eee;
        }

        /* Vehicles */
        .vehicle {
            position: fixed;
            bottom: 50px;
            left: -150px;
            font-size: 3.5rem;
            z-index: 100;
            transition: transform 6s linear;
        }

        /* Handwritten Section */
        .handwritten {
            font-family: 'Dancing Script', cursive;
            font-size: 1.6rem;
            color: var(--primary);
            margin-top: 20px;
            white-space: pre-line;
            opacity: 0;
        }

        /* Crying Overlay */
        #overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
    </style>
</head>
<body>

<canvas id="bg-canvas"></canvas>

<div class="glass-card" id="card">
    <div id="intro">
        <h1>Hi Tanishka ‚ù§Ô∏è</h1>
        <p>I built this small space just for you. There's something I need to ask...</p>
        <button onclick="reveal()" id="startBtn" style="background: var(--primary); color: white;">Open Heart</button>
    </div>

    <div id="question" style="display: none;">
        <p style="font-weight: 600; font-size: 1.2rem;">Will you be my Valentine?</p>
        <div class="btn-group">
            <button id="yesBtn">Yes, Always! ü•∞</button>
            <button id="noBtn">No</button>
        </div>
    </div>

    <div id="success" style="display: none;">
        <div class="heart-container" id="photo">
            <div class="heart-mask">
                <img src="us.jpeg" alt="Our Memory">
            </div>
        </div>
        <div id="typewriter" class="handwritten"></div>
    </div>
</div>

<div id="bus" class="vehicle">üöå</div>
<div id="truck" class="vehicle" style="margin-left: -140px;">üöö</div>

<div id="overlay">
    <div class="glass-card" style="max-width: 300px;">
        <img src="https://media.giphy.com/media/ROF8OQvDmxytW/giphy.gif" width="150">
        <p>Tanishka, why? üò≠</p>
        <button onclick="closeOverlay()" style="background: var(--primary); color: white;">I'm sorry! Click YES ‚ù§Ô∏è</button>
    </div>
</div>

<audio id="suspense"><source src="suspense.mp3" type="audio/mpeg"></audio>
<audio id="song"><source src="song.mp3" type="audio/mpeg"></audio>
<audio id="meow"><source src="meow.mp3" type="audio/mpeg"></audio>

<script>
    // 1. Smooth Background Particles
    const canvas = document.getElementById('bg-canvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    function init() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        particles = [];
        for(let i=0; i<30; i++) particles.push({
            x: Math.random()*canvas.width,
            y: Math.random()*canvas.height,
            s: Math.random()*2+1,
            v: Math.random()*0.5+0.2
        });
    }
    function animate() {
        ctx.clearRect(0,0,canvas.width, canvas.height);
        ctx.fillStyle = "#ffb3c1";
        particles.forEach(p => {
            p.y -= p.v;
            if(p.y < -10) p.y = canvas.height + 10;
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.s, 0, Math.PI*2);
            ctx.fill();
        });
        requestAnimationFrame(animate);
    }
    window.addEventListener('resize', init);
    init(); animate();

    // 2. Control Logic
    const suspense = document.getElementById('suspense');
    const song = document.getElementById('song');
    const meow = document.getElementById('meow');
    const yesBtn = document.getElementById('yesBtn');
    const noBtn = document.getElementById('noBtn');

    function reveal() {
        document.getElementById('intro').style.display = 'none';
        document.getElementById('question').style.display = 'block';
        suspense.play();
    }

    let noCount = 0;
    let yesScale = 1;

    noBtn.addEventListener('mouseenter', () => {
        if(noCount < 3) {
            noBtn.style.position = 'fixed';
            noBtn.style.left = Math.random() * 80 + '%';
            noBtn.style.top = Math.random() * 80 + '%';
            yesScale += 0.4;
            yesBtn.style.transform = `scale(${yesScale})`;
            noCount++;
        }
    });

    noBtn.addEventListener('click', () => {
        document.getElementById('overlay').style.display = 'flex';
        meow.play();
    });

    function closeOverlay() {
        document.getElementById('overlay').style.display = 'none';
        noBtn.style.position = 'static';
        yesScale = 1;
        yesBtn.style.transform = 'scale(1)';
        noCount = 0;
    }

    yesBtn.addEventListener('click', () => {
        suspense.pause();
        song.play();
        confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 }, colors: ['#ff4d6d', '#ff8fa3', '#ffffff'] });

        document.getElementById('question').style.display = 'none';
        document.getElementById('success').style.display = 'block';
        document.getElementById('photo').style.display = 'block';
        
        // Show vehicles
        document.getElementById('bus').style.transform = `translateX(${window.innerWidth + 500}px)`;
        document.getElementById('truck').style.transform = `translateX(${window.innerWidth + 500}px)`;

        const msg = "See what we have painted...\nMaybe it's not perfect, but it's the most beautiful thing.\n\nTanishka, you mean so much to me. Please never overthink, because you are my world.\n\n(And remember, the truck is right behind the bus! üòÇ)\n\nForever yours, Pranav ‚ù§Ô∏è";
        
        let i = 0;
        const typewriter = document.getElementById('typewriter');
        typewriter.style.opacity = 1;
        function type() {
            if (i < msg.length) {
                typewriter.innerHTML += msg.charAt(i);
                i++;
                setTimeout(type, 50);
            }
        }
        type();
    });
</script>
</body>
</html>
