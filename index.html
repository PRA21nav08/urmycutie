<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Tanishka ‚ù§Ô∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;500&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
  body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    overflow: hidden;
    background: linear-gradient(135deg, #ffd6e0, #ffeaf4);
    transition: background 1.5s ease;
  }
  canvas { position: fixed; inset: 0; z-index: -1; }
  .container { height: 100vh; display: flex; justify-content: center; align-items: center; padding: 20px; }
  
  .card {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(15px);
    padding: 30px;
    border-radius: 30px;
    text-align: center;
    max-width: 480px;
    width: 100%;
    box-shadow: 0 25px 70px rgba(255, 77, 109, .3);
    z-index: 10;
    max-height: 95vh;
    overflow-y: auto;
  }

  h1 { font-family: 'Dancing Script', cursive; color: #ff4d6d; font-size: 2.8rem; margin: 10px 0; }
  
  .heart-frame {
    width: 200px;
    height: 180px;
    margin: 20px auto;
    background-color: #ff4d6d;
    position: relative;
    clip-path: path('M100 30c-25-45-100-30-100 45 0 50 60 90 100 130 40-40 100-80 100-130 0-75-75-90-100-45z');
    display: none;
    animation: pulse 2s infinite;
    box-shadow: 0 10px 30px rgba(255, 77, 109, 0.5);
  }
  .heart-frame img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
  }

  .buttons { display: flex; justify-content: center; align-items: center; gap: 20px; margin-top: 20px; min-height: 120px; }
  button { border: none; border-radius: 50px; font-size: 1.1rem; cursor: pointer; transition: 0.3s; font-weight: bold; padding: 15px 35px; }
  
  #yesBtn { background: #ff4d6d; color: white; z-index: 100; box-shadow: 0 5px 15px rgba(255, 77, 109, 0.3); }
  #noBtn { background: #f8f9fa; border: 1px solid #ddd; color: #888; z-index: 50; }

  .truck-container {
    position: fixed; bottom: 30px; left: -250px; font-size: 4rem;
    transition: transform 6s linear; z-index: 1000; display: none;
  }

  #cryPopup {
    position: fixed; inset: 0; background: rgba(0, 0, 0, 0.85);
    display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 2000;
  }
  .popup-box { background: white; padding: 35px; border-radius: 25px; text-align: center; animation: shake 0.5s infinite; }
  .popup-box img { width: 160px; border-radius: 15px; }

  .handwritten {
    font-family: 'Dancing Script', cursive;
    font-size: 1.5rem;
    color: #ff4d6d;
    line-height: 1.5;
    white-space: pre-line;
    margin-top: 20px;
    text-align: center;
  }

  @keyframes shake {
    0%, 100% { transform: translate(0,0); }
    25% { transform: translate(-5px, 5px); }
    50% { transform: translate(5px, -5px); }
  }
</style>
</head>
<body>

<canvas id="hearts"></canvas>

<div class="container">
  <div class="card" id="card">
    <h1 id="title">Hi Tanishka ‚ù§Ô∏è</h1>
    <p style="color: #666;">I have a very special question for you...</p>
    <p style="font-weight: 600; color: #ff4d6d; font-size: 1.4rem;">Will you be my Valentine?</p>

    <div class="buttons">
      <button id="yesBtn">Yes! ü•∞</button>
      <button id="noBtn">No</button>
    </div>
  </div>
</div>

<div id="truck" class="truck-container">üöö</div>

<div id="cryPopup">
  <div class="popup-box">
    <img src="https://media.giphy.com/media/ROF8OQvDmxytW/giphy.gif">
    <p style="color: #ff4d6d; font-weight: bold; font-size: 1.2rem;">Tanishka, please don't... üò≠</p>
    <button onclick="closePopup()" style="background:#ff4d6d; color:white; padding:12px 25px; border-radius:25px; border:none; margin-top:15px; cursor:pointer;">I'm sorry, YES! ‚ù§Ô∏è</button>
  </div>
</div>

<audio id="suspenseAudio" loop><source src="suspense.mp3" type="audio/mpeg"></audio>
<audio id="valentineSong"><source src="song.mp3" type="audio/mpeg"></audio>
<audio id="meowSound"><source src="meow.mp3" type="audio/mpeg"></audio>

<script>
const canvas = document.getElementById("hearts");
const ctx = canvas.getContext("2d");
function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
resize(); window.addEventListener("resize", resize);

let hearts = [];
for (let i = 0; i < 45; i++) {
  hearts.push({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, size: Math.random()*15+10, speed: Math.random()*1+0.5 });
}
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  hearts.forEach(h => {
    h.y -= h.speed; if (h.y < -20) h.y = canvas.height + 20;
    ctx.globalAlpha = 0.4; ctx.font = h.size + "px serif"; ctx.fillText("‚ù§Ô∏è", h.x, h.y);
  });
  requestAnimationFrame(draw);
}
draw();

const suspense = document.getElementById("suspenseAudio");
const valentineSong = document.getElementById("valentineSong");
const meow = document.getElementById("meowSound");
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const cryPopup = document.getElementById("cryPopup");

let noCount = 0;
let yesScale = 1;

document.addEventListener('click', () => {
  if (suspense.paused && valentineSong.paused) { suspense.volume = 0.4; suspense.play(); }
}, { once: true });

noBtn.addEventListener("mouseover", () => {
  if (noCount < 2) { 
    noBtn.style.position = "fixed";
    noBtn.style.left = Math.random() * (window.innerWidth - 150) + "px";
    noBtn.style.top = Math.random() * (window.innerHeight - 100) + "px";
    yesScale += 0.5;
    yesBtn.style.transform = `scale(${yesScale})`;
    noCount++;
  }
});

noBtn.addEventListener("click", () => {
  cryPopup.style.display = "flex";
  meow.play();
});

function closePopup() {
  cryPopup.style.display = "none";
  noCount = 0;
  noBtn.style.position = "static";
  yesScale = 1;
  yesBtn.style.transform = "scale(1)";
}

const finalMsg = "See what we have painted and maybe it's not perfect but it's the most beautiful thing...\n\nTanishka, you mean so much to me. Please never feel anything else or overthink, because you are my world. ‚ù§Ô∏è\n\nI promise to keep you happy forever... but remember, agar tum bus mein nahi aayi toh truck jaega! üòÇüöö\n\nForever yours,\nPranav ‚ù§Ô∏è";

yesBtn.addEventListener("click", () => {
  suspense.pause();
  valentineSong.play();
  confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });

  document.body.style.background = "linear-gradient(135deg, #ff4d6d, #ff8fa3)";
  document.getElementById("card").innerHTML = `
    <h1>Always Yours! ‚ù§Ô∏è</h1>
    <div class="heart-frame" id="photoFrame" style="display:block;">
      <img src="us.jpeg" alt="Our Memory">
    </div>
    <div id="typewriter" class="handwritten"></div>
  `;

  const truck = document.getElementById("truck");
  truck.style.display = "block";
  setTimeout(() => { truck.style.transform = `translateX(${window.innerWidth + 500}px)`; }, 100);

  let i = 0;
  function type() {
    if (i < finalMsg.length) {
      document.getElementById("typewriter").innerHTML += finalMsg.charAt(i);
      i++;
      setTimeout(type, 55);
    }
  }
  type();
});
</script>
</body>
</html>
